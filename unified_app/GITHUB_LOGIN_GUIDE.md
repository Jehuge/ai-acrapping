# 🔐 GitHub 登录测试指南

## 使用表格导出工具登录 GitHub

### 测试步骤

#### 1. 准备工作

```bash
# 确保已安装依赖
pip install pandas openpyxl playwright

# 运行工具
streamlit run table_exporter.py
```

#### 2. 配置登录选项

**在侧边栏配置：**

1. ✅ **勾选"需要登录"**
2. ✅ **勾选"手动登录"**（GitHub 需要两步验证，必须手动）
3. ✅ **勾选"保存登录状态"**（方便下次使用）
4. ❌ **关闭"无头模式"**（可以看到浏览器窗口）

**输入信息：**
- **网页 URL**: `https://github.com/你的用户名/你的私密项目`
- **登录页面 URL**: `https://github.com/login`
- **导出按钮描述**: （如果项目有导出功能，填写按钮文字）

#### 3. 登录流程

1. **点击"开始抓取"**
2. **浏览器窗口会自动打开 GitHub 登录页面**
3. **手动输入用户名和密码**
4. **完成两步验证**（如果启用了）
5. **登录成功后，点击"我已登录，继续"按钮**
6. **工具会自动保存登录状态并继续**

#### 4. 访问私密项目

登录成功后，工具会：
- 自动访问你指定的私密项目 URL
- 使用保存的登录状态（cookies）
- 可以访问所有你有权限的私密项目

---

## ⚠️ 注意事项

### GitHub 特殊要求

1. **两步验证**：
   - GitHub 可能要求两步验证
   - 必须在浏览器中手动完成
   - 工具会等待你完成验证

2. **登录状态**：
   - 登录状态保存在 `login_state.json`
   - 包含 GitHub 的 session cookies
   - 有效期取决于 GitHub 的会话设置

3. **安全提示**：
   - `login_state.json` 包含敏感信息
   - 不要提交到 Git（已在 .gitignore 中）
   - 妥善保管，不要分享给他人

### 常见问题

**Q: 登录后无法访问私密项目？**
- 检查 URL 是否正确
- 确认你有该项目的访问权限
- 尝试刷新页面或重新登录

**Q: 两步验证失败？**
- 确保在浏览器窗口中完成验证
- 检查验证码输入是否正确
- 如果超时，重新开始流程

**Q: 登录状态失效？**
- 删除 `login_state.json` 文件
- 重新登录
- GitHub 会话可能已过期

---

## 🧪 测试示例

### 示例 1: 访问私密仓库

```
URL: https://github.com/your-username/private-repo
登录页面: https://github.com/login
按钮描述: （如果有导出功能）
```

### 示例 2: 访问私密组织的项目

```
URL: https://github.com/private-org/private-project
登录页面: https://github.com/login
```

### 示例 3: 使用保存的登录状态

1. 第一次：手动登录并保存状态
2. 第二次：直接使用，无需重新登录
3. 如果状态失效：删除 `login_state.json` 重新登录

---

## 🔒 安全建议

1. **保护登录状态文件**：
   ```bash
   # 设置文件权限（仅自己可读）
   chmod 600 login_state.json
   ```

2. **定期更新**：
   - 如果怀疑账户安全，删除状态文件
   - 重新登录获取新的会话

3. **不要分享**：
   - 不要将 `login_state.json` 分享给他人
   - 不要提交到公开的 Git 仓库

---

## 📝 使用技巧

### 技巧 1: 快速切换项目

如果已保存登录状态：
1. 直接输入新的项目 URL
2. 不需要重新登录
3. 工具会自动使用保存的状态

### 技巧 2: 检查登录状态

```python
# 检查文件是否存在
import os
if os.path.exists("login_state.json"):
    print("已保存登录状态")
else:
    print("需要重新登录")
```

### 技巧 3: 清除登录状态

```bash
# 删除登录状态文件
rm login_state.json
```

---

## 🎯 预期结果

成功登录后，你应该能够：
- ✅ 访问私密项目页面
- ✅ 查看项目内容
- ✅ 如果有导出功能，可以下载数据
- ✅ 登录状态已保存，下次自动使用

---

## 🐛 故障排除

### 问题 1: 浏览器窗口没有打开

**解决方案：**
- 确保关闭了"无头模式"
- 检查 Playwright 是否正确安装
- 尝试重新运行工具

### 问题 2: 登录后无法访问

**解决方案：**
- 检查 URL 是否正确
- 确认项目名称和用户名正确
- 尝试在普通浏览器中访问确认权限

### 问题 3: 登录状态不保存

**解决方案：**
- 确保勾选了"保存登录状态"
- 检查文件写入权限
- 查看是否有错误信息

---

## 📚 相关资源

- [GitHub 登录文档](https://docs.github.com/en/authentication)
- [Playwright 文档](https://playwright.dev/python/)
- [Streamlit 文档](https://docs.streamlit.io/)







